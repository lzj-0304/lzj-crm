<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lzj.crm.dao.SaleChanceDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.lzj.crm.entity.SaleChance" id="saleChanceMap">
        <result property="id" column="id"/>
        <result property="chanceSource" column="chance_source"/>
        <result property="customerName" column="customer_name"/>
        <result property="cgjl" column="cgjl"/>
        <result property="overview" column="overview"/>
        <result property="linkMan" column="link_man"/>
        <result property="linkPhone" column="link_phone"/>
        <result property="description" column="description"/>
        <result property="createMan" column="create_man"/>
        <result property="assignMan" column="assign_man"/>
        <result property="assignTime" column="assign_time"/>
        <result property="state" column="state"/>
        <result property="devResult" column="dev_result"/>
        <result property="isValid" column="is_valid"/>
        <result property="createDate" column="create_date"/>
        <result property="updateDate" column="update_date"/>
    </resultMap>
    <select id="selectByParams" resultType="com.lzj.crm.model.SaleChanceModel">
        select s.*,u.user_name as uname
        from t_sale_chance s left  join  t_user u on s.assign_man = u.id
        <where>
            s.is_valid=1
            <if test="customerName !=null and customerName !=''">
                and s.customer_name like concat('%',#{customerName},'%')
            </if>
            <if test="createMan !=null and createMan !=''">
                and s.create_man = #{createMan}
            </if>
            <if test="state !=null and state !=''">
                and s.state =#{state}
            </if>
            <if test="null !=assignMan">
                and s.assign_man = #{assignMan}
            </if>
            <if test="devResult !=null">
                and s.dev_result =#{devResult}
            </if>

        </where>

    </select>


</mapper>